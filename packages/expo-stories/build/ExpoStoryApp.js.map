{"version":3,"file":"ExpoStoryApp.js","sourceRoot":"","sources":["../src/ExpoStoryApp.tsx"],"names":[],"mappings":"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","sourcesContent":["import { lightTheme, shadows, spacing } from '@expo/styleguide-native';\nimport * as React from 'react';\nimport { View, SafeAreaView, Pressable, Text, StyleSheet, ScrollView } from 'react-native';\n\nimport { ExpoStoryLoader } from './ExpoStoryLoader';\nimport { Stack, StackContainer } from './async-stack';\n\n// this is resolved via customization (extraNodeModules) in metro-config / webpack-config\nconst stories = require('generated-expo-stories');\n\n// aggregate stories\nconst storyData = {};\n\nObject.keys(stories).forEach(key => {\n  const story = stories[key];\n  const storyConfig = story.storyConfig;\n  const parentConfig = story.parentConfig;\n\n  if (!storyData[parentConfig.id]) {\n    storyData[parentConfig.id] = {\n      ...parentConfig,\n      stories: [],\n    };\n  }\n\n  storyData[parentConfig.id].stories.push(storyConfig);\n});\n\nexport default function App() {\n  return (\n    <StackContainer>\n      <ExpoStoryApp />\n    </StackContainer>\n  );\n}\n\nfunction ExpoStoryApp() {\n  const parentStories: any[] = [];\n\n  Object.keys(storyData).forEach(key => {\n    const parentStory: any = storyData[key];\n    parentStories.push(parentStory);\n  });\n\n  return (\n    <SafeAreaView style={styles.flexContainer}>\n      <View style={styles.flexContainer}>\n        <Text style={styles.storyTitle}>Expo Story Loader</Text>\n\n        <ScrollView style={styles.storyButtonsContainer}>\n          {parentStories.map((story: any) => {\n            return (\n              <StoryButton\n                key={story.id}\n                title={story.title}\n                onPress={() => {\n                  Stack.push({\n                    element: <StoriesScreen parentStoryId={story.id} />,\n                    headerProps: { title: story.title },\n                  });\n                }}\n              />\n            );\n          })}\n        </ScrollView>\n      </View>\n    </SafeAreaView>\n  );\n}\n\nfunction StoriesScreen({ parentStoryId }) {\n  const parentStories: any = [];\n\n  Object.keys(storyData).forEach(key => {\n    if (key === parentStoryId) {\n      parentStories.push(storyData[key]);\n    }\n  });\n\n  return (\n    <SafeAreaView style={styles.flexContainer}>\n      <ScrollView style={styles.flexContainer}>\n        {parentStories.map(story => {\n          return (\n            <View key={story.id}>\n              {story.stories.map(s => {\n                return (\n                  <StoryButton\n                    key={s.id}\n                    title={s.name}\n                    onPress={() => {\n                      Stack.push({\n                        element: <ExpoStoryLoader selectedStoryId={s.id} />,\n                        headerProps: { title: s.name },\n                      });\n                    }}\n                  />\n                );\n              })}\n              {story.stories.length > 1 && (\n                <StoryButton\n                  title=\"See All\"\n                  color={lightTheme.button.tertiary.background}\n                  onPress={() => {\n                    Stack.push({\n                      element: <ExpoStoryLoader selectedStoryId={story.id} displayStoryTitle />,\n                      headerProps: { title: `${story.title} Stories` },\n                    });\n                  }}\n                />\n              )}\n            </View>\n          );\n        })}\n      </ScrollView>\n    </SafeAreaView>\n  );\n}\n\nfunction StoryButton({ title, color = lightTheme.button.primary.background, onPress }) {\n  return (\n    // @ts-ignore\n    <Pressable style={[styles.storyButton, { backgroundColor: color }]} onPress={onPress}>\n      <Text style={styles.storyButtonText}>{title}</Text>\n    </Pressable>\n  );\n}\n\nconst styles = StyleSheet.create({\n  flexContainer: {\n    flex: 1,\n    backgroundColor: lightTheme.background.default,\n    padding: spacing[3],\n  },\n  storyTitle: {\n    fontSize: 32,\n    fontWeight: 'bold',\n  },\n  storyButtonsContainer: {\n    padding: spacing[4],\n    backgroundColor: lightTheme.background.default,\n  },\n  storyButton: {\n    borderRadius: 4,\n    paddingVertical: spacing[4],\n    marginVertical: spacing[2],\n    backgroundColor: lightTheme.button.primary.background,\n    ...shadows.button,\n  },\n  storyButtonText: {\n    fontSize: 18,\n    fontWeight: '700',\n    color: lightTheme.button.primary.foreground,\n    textAlign: 'center',\n  },\n  refreshButton: {\n    position: 'absolute',\n    padding: spacing[3],\n    bottom: spacing[6],\n    left: 0,\n    right: 0,\n  },\n  refreshLoader: {\n    position: 'absolute',\n    right: spacing[4],\n    bottom: 0,\n    top: 0,\n  },\n  loadingContainer: {\n    ...StyleSheet.absoluteFillObject,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n});\n"]}